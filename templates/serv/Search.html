<!DOCTYPE html>
<html style="height:100%;margin:0;padding:0;">
<head>
  <meta charset="utf-8" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="اپلیکیشن هوشمندسازی اسکان"/>
  <!-- <link rel="manifest" href="%PUBLIC_URL%/manifest.json" /> -->
  <title>جالوس: ویلا، نوشیدنی، صبحانه</title>
  <meta name="apple-mobile-web-app-title" content="جالوس: ویلا، نوشیدنی، صبحانه">
  <link rel="apple-touch-icon" href="/static/app-icon.webp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, maximum-scale=1.0, user-scalable=0, target-densityDpi=device-dpi">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="ScreenOrientation" content="autoRotate:disabled">
  <script src="/static/react.production.min.js" crossorigin></script>
  <script src="/static/react-dom.production.min.js" crossorigin></script>
  <script src="/static/jDate.min.js"></script>
  <link rel="stylesheet" href="/static/leaflet.css" />
  <script src="/static/leaflet.js"></script>
  <script src="/static/leaflet-hash.js"></script>
  <style type="text/css">.leaflet-tile-container { pointer-events: auto; } .leaflet-control-attribution a {display: none;} .leaflet-control-zoom.leaflet-bar.leaflet-control {display: none;}
  @font-face { font-weight: 300; src: url(/static/IRANSansWeb_Light.woff2); font-family: IRANSans; font-display: swap; font-style: normal; }
  @font-face { font-weight: 400; src: url(/static/IRANSansWeb.woff2); font-family: IRANSans; font-display: swap; font-style: normal; }
  @font-face { font-weight: 500; src: url(/static/IRANSansWeb_Medium.woff2); font-family: IRANSans; font-display: swap; font-style: normal; }
  @font-face { font-weight: 700; src: url(/static/IRANSansWeb_Bold.woff2); font-family: IRANSans; font-display: swap; font-style: normal; }
  @font-face { font-weight: 400; src: url(/static/sonnat-icons.woff2) format("woff2"); font-display: block; font-family: sonnat; font-style: normal; font-variant: normal;}
  .balcony::before {content: "\ea18"} .cabinet::before {content: "\ea19"} .parking::before {content: "\ea1c"} .telephone::before {content: "\e900"}
  * {box-sizing: border-box; font-family: IRANSans; font-weight: 400;}
  *.bold {font-family: IRANSans; font-weight: 700;} *.primary {color: #0D6EFD}
  table.table-hover tbody {cursor: pointer} .pin::before {content: ''; display: inline-block; position: absolute; height: 0; width: 0; border-color: white #fff0 #fff0 #fff0; border-style: solid; border-width: 5px 5px 0px 5px; bottom: 19px; left: 10px}
  .touchable { cursor: pointer !important; transition: 0.07s ease-in-out !important; } .touchable:active { opacity: .2 !important; }
  .column:not(:first-child):not(:nth-child(3n+1))::before {border-left: 1px solid rgba(0,0,0,.12); content: ""; height: 40px; position: absolute; right: 0; top: 50%; -webkit-transform: translateY(-50%); transform: translateY(-50%);}
  hr.divider { background-color: rgba(0,0,0,.12); border: none; box-sizing: border-box; height: 1px; margin: 0 .65em;}
  .scroll { -ms-overflow-style: none; scrollbar-width: none; } .scroll::-webkit-scrollbar { display: none; }
  .lenz {overflow: hidden; border-radius: 50%; height: 100%; width: 100%; background-position: center; background-size: cover; border: none; box-shadow: 0 0 16px -1px #3e3f41ad inset, 0 0 4px -1px #ffffff79; color: white; font-weight: 500; text-align: center;}
  </style>
</head>
<body style="height:100%;margin:0;padding:0;background-color: #212333;">
  <div id="map" style="height: calc(100% - 127px); opacity: 1"></div>
  <div id="app" style="height: calc(127px)"></div>
  <script>function setCookie(name, value) {
    var expires = "";
    var date = new Date();
    date.setTime(date.getTime() + 180 * 24 * 60 * 60 * 1000);
    expires = "; expires=" + date.toUTCString();
    document.cookie = name + "=" + (value || "") + expires + "; path=/";
  }
  function cookie(name) {
    var nameEQ = name + "=",
      ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
  }
  function delCookie(name) {
    document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
  }
  var dateObj = new Date(),
    now = [dateObj.getUTCFullYear(), dateObj.getUTCMonth() + 1, dateObj.getUTCDate()];
  const faNow = jDate.gregorianToJalali(now[0], now[1], now[2]);
  const faTable = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
  const deFaTable = {
    '۰': 0,
    '۱': 1,
    '۲': 2,
    '۳': 3,
    '۴': 4,
    '۵': 5,
    '۶': 6,
    '۷': 7,
    '۸': 8,
    '۹': 9,
    '٠': 0,
    '١': 1,
    '٢': 2,
    '٣': 3,
    '٤': 4,
    '٥': 5,
    '٦': 6,
    '٧': 7,
    '٨': 8,
    '٩': 9
  };
  let categories = [];
  ['buy', 'rent'].map(ft => {
    ['apartment', 'villa', 'old-house', 'office', 'store', 'industrial-agricultural-property'].map(et => {
      categories.push(`${ft}-${et}`);
    });
  });
  categories = categories.filter(e => e !== 'rent-old-house');
  ['temporary-suite-apartment', 'temporary-villa', 'temporary-workspace'].map(et => categories.push(`rent-${et}`));
  categories.push('contribution-construction');
  categories.push('pre-sell-home');
  const icons = {
    'بالکن': 'balcony',
    'انباری': 'cabinet',
    'پارکینگ': 'parking'
  };
  const maxStat = [[-1, -54], [49, -16], [31, 43], [-31, 43], [-48, -16]],
    cStat = [49, 55];
  var map = L.map('map').setView([32.6509, 51.6637], 13);
  map.setMaxBounds([[-90, 23.826], [40.681, 63.325]]);
  L.tileLayer('/static/tiles/{z}_{x}_{y}.webp', {
    attribution: '',
    maxZoom: 14,
    maxNativeZoom: 14,
    zoomControl: false
    // crs: L.CRS.Simple,
  }).addTo(map);
  var hash = L.hash(map);
  Object.defineProperty(String.prototype, 'capitalize', {
    value: function () {
      return this.charAt(0).toUpperCase() + this.slice(1);
    },
    enumerable: false
  });
  Object.defineProperty(String.prototype, 'farsify', {
    value: function () {
      return this.split('').map(ch => ch >= '0' && ch <= '9' ? faTable[parseInt(ch)] : ch).join('');
    },
    enumerable: false
  });
  Object.defineProperty(Number.prototype, 'farsify', {
    value: function () {
      return ('' + this).split('').map(ch => ch >= '0' && ch <= '9' ? faTable[parseInt(ch)] : ch).join('');
    },
    enumerable: false
  });
  Object.defineProperty(String.prototype, 'deFarsify', {
    value: function () {
      return this.split('').map(ch => ch in deFaTable ? deFaTable[ch] : ch).join('');
    },
    enumerable: false
  });
  Object.defineProperty(Object.prototype, 'isEmpty', {
    value: function () {
      return Object.keys(this).length === 0 && Object.getPrototypeOf(this) === Object.prototype;
    },
    enumerable: false
  });
  class App extends React.Component {
    constructor(props) {
      super(props); // condition: Clear, Cloudy, Rainy, Snowy
      delCookie('phone');
      delCookie('session');
      this.state = {
        landing: true,
        properties: [],
        property: 0,
        category: null,
        stat: 0,
        show: {},
        calendared: false,
        calendar: [],
        calendarBias: 0,
        calendarRange: [-1, -1],
        ordered: false,
        phone: cookie('phone'),
        session: cookie('session'),
        otp: false,
        keys: {}
      };
      let app = this;
      window.app = this;
      this.checkReserved = this.checkReserved.bind(this);
      this.binSearch = this.binSearch.bind(this);
      this.calendar = this.calendar.bind(this);
      Object.defineProperty(String.prototype, 'translate', {
        value: function () {
          return !app.state.trans ? this : tr_table[this.toLowerCase()];
        },
        enumerable: false
      });
    }
    async checkReserved() {
      if ('calendarReserved' in this.state.show) return;
      let r = await fetch(`/key/${this.state.show.id}`);
      r = await r.json();
      let calendar = [];
      for (var j = 0; j < r.length; j++) {
        let key = r[j];
        calendar.push([-1, -1]);
        for (var i = 0; i < this.state.calendar.length; i++) {
          if (this.state.calendar[i].join('-') == key.head) calendar[calendar.length - 1][0] = i;
          if (this.state.calendar[i].join('-') == key.tail) calendar[calendar.length - 1][1] = i;
        }
        if (calendar.length > 1 && calendar[calendar.length - 1][0] - calendar[calendar.length - 2][1] === 1) {
          calendar[calendar.length - 2][1] = calendar[calendar.length - 1][1];
          calendar.pop();
        }
      }
      let binCalendar = [];
      calendar = [[4, 5], [7, 7], [9, 11], [25, 32]];
      for (var j = 0; j < calendar.length; j++) {
        binCalendar.push([calendar[j][0], false]);
        binCalendar.push([calendar[j][1], true]);
      }
      this.state.show.calendarReserved = binCalendar;
      this.setState({
        show: this.state.show,
        landing: false
      }, () => {
        window.history.replaceState({}, null, `/properties/${this.state.show.id}`);
      });
    }
    binSearch(k) {
      if (!('calendarReserved' in this.state.show)) return 0;
      let start = 0,
        arr = this.state.show.calendarReserved;
      let end = arr.length - 1,
        mid;
      while (start <= end) {
        mid = Math.floor((start + end) / 2);
        if (arr[mid][0] === k) return arr[mid][1] ? [mid > 0 && arr[mid][0] == arr[mid - 1][0] ? 4 : 3, mid] : [mid + 1 < arr.length && arr[mid + 1][0] == arr[mid][0] ? 4 : 2, mid];
        if (k < arr[mid][0]) end = mid - 1;else start = mid + 1;
      }
      return arr[mid][0] < k ? [!arr[mid][1] ? 1 : 0, mid] : [arr[mid][1] ? 1 : 0, mid];
    }
    async componentDidMount() {
      let r = await fetch('/properties', {
        method: 'POST'
      });
      r = (await r.json()).properties;
      window.markerClick = async e => {
        e.preventDefault();
        e.stopPropagation();
        let ps = window.app.state.properties,
          target = e.target;
        if (target.tagName == 'SPAN') target = target.parentElement;
        for (var i = 0; i < ps.length; i++) if (ps[i].id == target.id) {
          window.history.replaceState({}, null, `/properties/${ps[i].id}`);
          window.app.setState({
            show: ps[i],
            landing: false
          });
          window.app.checkReserved();
          break;
        }
      };
      r.map((property, idx) => {
        property.icon = L.divIcon({
          className: 'custom-div-icon',
          iconSize: [108, 108],
          iconAnchor: [54, 54],
          html: "<div id='" + property.id + "' style='background-image: url(" + property.images[0] + ")' class='lenz touchable' onclick='window.markerClick.apply(this, arguments)'>" + String(property.price).replace(/(\d)(?=(\d{3})+$)/g, '$1,').farsify().split('').map((ch, i, arr) => `<span style="display: inline-block; position: absolute; bottom: auto; left: 50%; transform: translateX(-.2em) rotate(${-(arr.length / 2 - i) * 8 + 20}deg); transform-origin: center 60px 0px; font-size: 1.15em; line-height: .8em; font-weight: 500">${ch}</span>`).join('') + "<span style='display: inline-block; position: absolute; bottom: auto; left: 50%; transform: translateX(-.3em) rotate(-" + String(property.price).replace(/(\d)(?=(\d{3})+$)/g, '$1,').length * 4.4 + "deg); transform-origin: center 74px 0px; font-size: 1.15em; line-height: .15em; font-weight: 500;'>تومان</span></div>"
        });
        L.marker(property.location, {
          icon: property.icon
        }).addTo(map);
      });
      this.setState({
        properties: r.sort((p0, p1) => p1.stat[0] - p0.stat[0])
      }, () => {
        map.panTo(new L.LatLng(...this.state.properties[0].location), {
          animate: true,
          duration: .3,
          easeLinearity: .9
        });
      });
      for (var i = 1; i <= faNow[2]; i++) this.state.calendar.push([faNow[0], faNow[1], i]);
      var calendarBias = (dateObj.getDay() - (this.state.calendar.length - 1) + 2402) % 7;
      var flag = 0;
      for (var i = 1; flag < 4; i++) {
        dateObj.setDate(dateObj.getDate() + 1);
        now = [dateObj.getUTCFullYear(), dateObj.getUTCMonth() + 1, dateObj.getUTCDate()];
        now = jDate.gregorianToJalali(now[0], now[1], now[2]);
        if (now[1] !== this.state.calendar[this.state.calendar.length - 1][1]) flag += 1;
        this.state.calendar.push([now[0], now[1], now[2]]);
      }
      this.state.calendar.pop();
      this.setState({
        calendar: this.state.calendar,
        calendarBias: calendarBias
      });
      if (window.location.pathname.split('/').length == 3) {
        for (let h = 0; h < this.state.properties.length; h++) {
          if (this.state.properties[h].id == window.location.pathname.split('/')[2]) this.setState({
            show: this.state.properties[h],
            landing: false
          }, async () => {
            map.panTo(new L.LatLng(...this.state.properties[h].location));
            window.history.replaceState({}, null, `/properties/${this.state.show.id}`);
            window.app.checkReserved();
          });
        }
      }
      if (!this.state.session) return;
      r = await fetch('/key', {
        method: 'GET',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json',
          'Authorization': this.state.session
        }
      });
      if (r.status < 300) {
        r = await r.json();
        for (var i = 0; i < r.length; i++) this.state.keys[r[i].home] = r[i];
      }
      for (let h in this.state.keys) {
        let key = this.state.keys[h];
        if ('fix' in key && key.fix === false) {
          this.state.ordered = true;
          var i = 0;
          for (i = 0; i < this.state.calendar.length; i++) {
            if (this.state.calendar[i].join('-') == key.head) this.state.calendarRange[0] = i;
            if (this.state.calendar[i].join('-') == key.tail) this.state.calendarRange[1] = i;
          }
          for (i = 0; i < this.state.properties.length; i++) if (this.state.properties[i].id == key.home) break;
          this.setState({
            calendarRange: this.state.calendarRange,
            ordered: this.state.ordered,
            show: this.state.properties[i],
            landing: false
          }, async () => {
            map.panTo(new L.LatLng(...this.state.properties[i].location), {
              animate: true,
              duration: .3,
              easeLinearity: .9
            });
            window.history.replaceState({}, null, `/properties/${this.state.show.id}`);
            window.app.checkReserved();
          });
        }
      }
      // , async () => {window.history.replaceState({}, null, `/properties/${this.state.show.id}`); window.app.checkReserved()}
      // TODO oonja ke vasate buy mire login va; oonja ke buy mikone vo ghablesh login hast, va didMount -> checkForPendingLoop(); age peding dasht mimoone too divare oonsafe tekoonam nemikhore (khastam quit kone payam dialogue midim ke baz shode dari boro beband), key dasht mire too home, va ellaa /search
    }
    calendar() {
      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'relative',
          zIndex: 2,
          marginBottom: -20,
          direction: 'ltr',
          marginLeft: 10,
          marginRight: 10
        }
      }, ['شنبه', 'یک', 'دو', 'سه', 'چهار', 'پنج', 'جمعه'].map(wDay => /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          width: 'calc(100% / 7)',
          textAlign: 'center',
          fontSize: '.75em',
          color: '#343747af',
          fontWeight: 700
        }
      }, wDay))), /*#__PURE__*/React.createElement("div", {
        className: "scroll",
        style: {
          margin: '10px 10px',
          color: '#343747',
          backgroundColor: 'rgb(240, 233, 236)',
          fontWeight: 700,
          borderRadius: 12,
          fontSize: '1.03em',
          direction: 'ltr',
          paddingTop: 5,
          paddingBottom: 3,
          maxHeight: 44 * 5 + 16,
          overflowY: 'scroll',
          overflowX: 'hidden'
        }
      }, [...Array(this.state.calendarBias).keys()].map(() => /*#__PURE__*/React.createElement("span", {
        style: {
          width: 'calc(100% / 7)',
          textAlign: 'center',
          lineHeight: '12px',
          paddingTop: 16,
          paddingBottom: 16,
          display: 'inline-block'
        }
      })), this.state.calendar.map(([y, m, d], di) => /*#__PURE__*/React.createElement("span", {
        onClick: () => {
          if (m === faNow[1] && d < faNow[2] || this.binSearch(di)[0] || this.state.calendarRange[0] !== -1 && Math.abs(this.binSearch(di)[1] - this.binSearch(this.state.calendarRange[0])[1]) > 0) this.setState({
            calendarRange: [-1, -1]
          });else {
            if (this.state.calendarRange[0] === -1) this.setState({
              calendarRange: [di, di]
            });else if (this.state.calendarRange[0] === this.state.calendarRange[1]) this.setState({
              calendarRange: [Math.min(this.state.calendarRange[0], di), Math.max(this.state.calendarRange[0], di)]
            });else this.setState({
              calendarRange: [di, di]
            });
          }
        },
        class: m === faNow[1] && d < faNow[2] ? "" : "touchable",
        style: {
          width: 'calc(100% / 7)',
          textAlign: 'center',
          lineHeight: '12px',
          paddingTop: 16,
          paddingBottom: 16,
          display: 'inline-block',
          fontSize: '1.13em',
          fontWeight: 500,
          color: this.binSearch(di)[0] ? '#fce9eb' : m === faNow[1] && d < faNow[2] ? '#e310256F' : this.state.calendarRange[0] <= di && di <= this.state.calendarRange[1] ? '#fff9fa' : '#212232',
          backgroundColor: this.binSearch(di)[0] ? '#ee6f7b' : this.state.calendarRange[0] <= di && di <= this.state.calendarRange[1] ? '#e31025' : 'transparent',
          borderTopLeftRadius: this.state.calendarRange[0] === di || this.binSearch(di)[0] == 2 || this.binSearch(di)[0] == 4 ? 22 : 0,
          borderBottomLeftRadius: this.state.calendarRange[0] === di || this.binSearch(di)[0] == 2 || this.binSearch(di)[0] == 4 ? 22 : 0,
          borderBottomRightRadius: this.state.calendarRange[1] === di || this.binSearch(di)[0] == 3 || this.binSearch(di)[0] == 4 ? 22 : 0,
          borderTopRightRadius: this.state.calendarRange[1] === di || this.binSearch(di)[0] == 3 || this.binSearch(di)[0] == 4 ? 22 : 0
        }
      }, d === 1 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'relative',
          top: -6
        }
      }, d.farsify()), /*#__PURE__*/React.createElement("div", {
        style: {
          lineHeight: 0,
          position: 'relative',
          top: 5,
          fontSize: '.79em',
          marginTop: -5,
          marginBottom: 5
        }
      }, jDate.jaMonths[m - 1])) : d.farsify()))));
    }
    render() {
      return /*#__PURE__*/React.createElement("div", {
        style: {
          height: '100%'
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "categories",
        style: {
          backgroundColor: '#353331',
          direction: 'ltr',
          borderTop: '1px solid rgb(47, 39, 49)',
          height: '100%'
        }
      }, /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          position: 'absolute',
          color: 'white',
          fontSize: '.85em',
          fontWeight: 500,
          left: 54,
          bottom: 106,
          zIndex: 599
        }
      }, "\u0627\u0645\u06A9\u0627\u0646\u0627\u062A"), /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          position: 'absolute',
          color: 'white',
          fontSize: '.85em',
          fontWeight: 500,
          left: 1,
          bottom: 75,
          zIndex: 599
        }
      }, "\u062E\u0627\u0635"), /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          position: 'absolute',
          color: 'white',
          fontSize: '.85em',
          fontWeight: 500,
          left: 16,
          bottom: 0,
          zIndex: 599
        }
      }, "\u062F\u0633\u062A\u0631\u0633\u06CC"), /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          position: 'absolute',
          color: 'white',
          fontSize: '.85em',
          fontWeight: 500,
          left: 122,
          bottom: 76,
          zIndex: 599
        }
      }, "\u0627\u0642\u062A\u0635\u0627\u062F\u06CC"), /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          position: 'absolute',
          color: 'white',
          fontSize: '.85em',
          fontWeight: 500,
          left: 90,
          bottom: 0,
          zIndex: 599
        }
      }, "\u0638\u0631\u0641\u06CC\u062A"), /*#__PURE__*/React.createElement("svg", {
        height: "99",
        width: "99",
        style: {
          backgroundImage: 'linear-gradient(to left, #35333120, #353331f0 14%)',
          marginBottom: -10,
          position: 'relative',
          top: 9,
          left: 26,
          zIndex: 598
        }
      }, /*#__PURE__*/React.createElement("polygon", {
        points: `${maxStat[0][0] + cStat[0]} ${maxStat[0][1] + cStat[1]},${maxStat[1][0] + cStat[0]} ${maxStat[1][1] + cStat[1]},${maxStat[2][0] + cStat[0]} ${maxStat[2][1] + cStat[1]},${maxStat[3][0] + cStat[0]} ${maxStat[3][1] + cStat[1]},${maxStat[4][0] + cStat[0]} ${maxStat[4][1] + cStat[1]}`,
        stroke: "rgba(200, 100, 89, .8)",
        fill: "#353331",
        "stroke-width": "1"
      }), this.state.properties.length && /*#__PURE__*/React.createElement("polygon", {
        points: `${maxStat[0][0] * this.state.properties[this.state.property].stat[0] + cStat[0]} ${maxStat[0][1] * this.state.properties[this.state.property].stat[0] + cStat[1]},${maxStat[1][0] * this.state.properties[this.state.property].stat[1] + cStat[0]} ${maxStat[1][1] * this.state.properties[this.state.property].stat[1] + cStat[1]},${maxStat[2][0] * this.state.properties[this.state.property].stat[2] + cStat[0]} ${maxStat[2][1] * this.state.properties[this.state.property].stat[2] + cStat[1]},${maxStat[3][0] * this.state.properties[this.state.property].stat[3] + cStat[0]} ${maxStat[3][1] * this.state.properties[this.state.property].stat[3] + cStat[1]},${maxStat[4][0] * this.state.properties[this.state.property].stat[4] + cStat[0]} ${maxStat[4][1] * this.state.properties[this.state.property].stat[4] + cStat[1]}`,
        stroke: "rgba(200, 200, 200, .8)",
        fill: "rgba(255, 255, 255, .1)",
        "stroke-width": "1"
      }), /*#__PURE__*/React.createElement("line", {
        x1: maxStat[0][0] + cStat[0],
        y1: maxStat[0][1] + cStat[1],
        x2: cStat[0],
        y2: cStat[1],
        style: {
          stroke: 'rgba(200, 100, 89, .8)',
          strokeWidth: 1,
          strokeDasharray: '5,5'
        }
      }), /*#__PURE__*/React.createElement("line", {
        x1: maxStat[1][0] + cStat[0],
        y1: maxStat[1][1] + cStat[1],
        x2: cStat[0],
        y2: cStat[1],
        style: {
          stroke: 'rgba(200, 100, 89, .8)',
          strokeWidth: 1,
          strokeDasharray: '5,5'
        }
      }), /*#__PURE__*/React.createElement("line", {
        x1: maxStat[2][0] + cStat[0],
        y1: maxStat[2][1] + cStat[1],
        x2: cStat[0],
        y2: cStat[1],
        style: {
          stroke: 'rgba(200, 100, 89, .8)',
          strokeWidth: 1,
          strokeDasharray: '5,5'
        }
      }), /*#__PURE__*/React.createElement("line", {
        x1: maxStat[3][0] + cStat[0],
        y1: maxStat[3][1] + cStat[1],
        x2: cStat[0],
        y2: cStat[1],
        style: {
          stroke: 'rgba(200, 100, 89, .8)',
          strokeWidth: 1,
          strokeDasharray: '5,5'
        }
      }), /*#__PURE__*/React.createElement("line", {
        x1: maxStat[4][0] + cStat[0],
        y1: maxStat[4][1] + cStat[1],
        x2: cStat[0],
        y2: cStat[1],
        style: {
          stroke: 'rgba(200, 100, 89, .8)',
          strokeWidth: 1,
          strokeDasharray: '5,5'
        }
      })), /*#__PURE__*/React.createElement("div", {
        className: "categories scroll",
        style: {
          width: 'calc(100% - 107px)',
          marginLeft: 107,
          display: 'flex',
          flexDirection: 'row',
          overflowX: 'auto',
          paddingTop: 3,
          paddingBottom: 4,
          paddingLeft: 3,
          paddingRight: 3,
          direction: 'rtl',
          position: 'absolute',
          bottom: 0
        }
      }, [...new Set(this.state.properties.map(pr => pr.category))].map((category, idx) => /*#__PURE__*/React.createElement("span", {
        className: "touchable",
        style: {
          fontSize: '.88em',
          display: 'inline-block',
          width: 'auto',
          margin: 4,
          padding: 10,
          paddingLeft: 22,
          paddingRight: 22,
          lineHeight: '14px',
          backgroundColor: 'rgba(89, 89, 89, 0.75)',
          borderRadius: 7 + 27,
          color: 'rgba(247, 253, 255, .95)',
          borderStyle: 'solid',
          borderWidth: 2,
          borderColor: this.state.category == category ? '#ab5a51' : '#636063'
        },
        onClick: () => {
          this.setState({
            category: category
          });
        }
      }, category))), /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'absolute',
          right: 0,
          bottom: 111,
          zIndex: 699,
          direction: 'rtl'
        }
      }, /*#__PURE__*/React.createElement("svg", {
        onClick: () => {
          if (this.state.property == this.state.properties.length - 1) return;
          this.setState({
            property: this.state.property + 1
          }, () => {
            map.panTo(new L.LatLng(...this.state.properties[this.state.property].location), {
              animate: true,
              duration: .3,
              easeLinearity: .9
            });
          });
        },
        class: "touchable",
        style: {
          opacity: this.state.property == this.state.properties.length - 1 ? .6 : 1,
          backgroundColor: 'rgba(200, 100, 89, .8)',
          display: 'inline-block',
          width: 30,
          height: 30,
          borderRadius: 15,
          verticalAlign: 'middle',
          marginRight: 7
        }
      }, /*#__PURE__*/React.createElement("polygon", {
        points: "11 10, 11 20, 20, 15",
        stroke: "rgba(200, 100, 89, .5)",
        fill: "white",
        "stroke-width": "1"
      })), /*#__PURE__*/React.createElement("svg", {
        onClick: () => {
          if (this.state.property == 0) return;
          this.setState({
            property: this.state.property - 1
          }, () => {
            map.panTo(new L.LatLng(...this.state.properties[this.state.property].location), {
              animate: true,
              duration: .3,
              easeLinearity: .9
            });
          });
        },
        class: "touchable",
        style: {
          opacity: this.state.property == 0 ? .6 : 1,
          backgroundColor: 'rgba(200, 100, 89, .8)',
          display: 'inline-block',
          width: 30,
          height: 30,
          borderRadius: 15,
          verticalAlign: 'middle',
          marginRight: 7
        }
      }, /*#__PURE__*/React.createElement("polygon", {
        points: "19 10, 19 20, 10, 15",
        stroke: "rgba(200, 100, 89, .5)",
        fill: "white",
        "stroke-width": "1"
      })), /*#__PURE__*/React.createElement("span", {
        class: "touchable",
        style: {
          backgroundColor: 'rgba(200, 100, 89, .8)',
          display: 'inline-block',
          color: 'white',
          height: 30,
          borderRadius: 15,
          verticalAlign: 'middle',
          paddingLeft: 8,
          paddingRight: 10,
          marginRight: 7
        },
        onClick: () => {
          this.setState({
            calendared: true
          });
        }
      }, "\u062A\u0642\u0648\u06CC\u0645"), /*#__PURE__*/React.createElement("span", {
        class: "touchable",
        style: {
          backgroundColor: 'rgba(200, 100, 89, .8)',
          display: 'inline-block',
          color: 'white',
          height: 30,
          borderRadius: 15,
          verticalAlign: 'middle',
          paddingLeft: 8,
          paddingRight: 10,
          marginRight: 7
        },
        onClick: async () => {
          let stat = (this.state.stat + 1) % 5;
          this.setState({
            stat: stat,
            property: 0,
            properties: this.state.properties.sort((p0, p1) => p1.stat[stat] - p0.stat[stat])
          }, () => {
            map.panTo(new L.LatLng(...this.state.properties[this.state.property].location), {
              animate: true,
              duration: .3,
              easeLinearity: .9
            });
          });
        }
      }, ['پرامکانات‌ترین', 'اقتصادی‌ترین', 'جادارترین', 'پردسترس‌ترین', 'خاص‌ترین'][this.state.stat])), /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'absolute',
          right: 8,
          bottom: 81,
          color: '#edf3f5',
          fontSize: '1.02em'
        }
      }, this.state.properties.length ? this.state.properties[this.state.property].title : '-'), /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'absolute',
          right: 8,
          bottom: 48,
          color: '#edf3f5',
          fontSize: '.92em',
          fontWeight: 500
        }
      }, /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          marginRight: 2
        }
      }, "\u062A\u0648\u0645\u0627\u0646"), (this.state.properties.length ? String(this.state.properties[this.state.property].price) : '-').replace(/(\d)(?=(\d{3})+$)/g, '$1,').farsify())), this.state.landing && /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'fixed',
          left: 0,
          right: 0,
          top: 0,
          bottom: 0,
          zIndex: 799,
          padding: 14,
          backgroundColor: '#1111126A'
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          if (e.target === e.currentTarget) this.setState({
            landing: false
          });
        }
      }, /*#__PURE__*/React.createElement("div", {
        ref: elem => {
          window.show = elem;
        },
        className: "scroll",
        style: {
          backgroundColor: 'white',
          borderRadius: 16,
          direction: 'rtl',
          overflowY: 'scroll'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          flexShrink: 0,
          display: 'inline-block',
          backgroundImage: 'url(/static/hotel.webp)',
          backgroundSize: 'cover',
          backgroundPosition: 'center',
          height: 200,
          width: '100%'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: 'calc(25% - 1.6rem + 10px)',
          fontSize: '1.6rem',
          paddingRight: '.9rem',
          paddingLeft: '.9rem',
          color: '#fff',
          whiteSpace: 'pre-line'
        }
      }, " \u0644\u0630\u062A \u062A\u062C\u0631\u0628\u0647 \u0648\u06CC\u0644\u0627\u06CC \u0647\u0648\u0634\u0645\u0646\u062F \u0648 \u0633\u0644\u0641 \u0633\u0631\u0648\u06CC\u0633 ")), /*#__PURE__*/React.createElement("div", {
        style: {
          paddingRight: '.9rem',
          paddingLeft: '.9rem'
        }
      }, /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          width: 6,
          height: 6,
          backgroundColor: 'black',
          borderRadius: 6,
          marginLeft: 6
        }
      }), "\u062F\u0631 \u062C\u0627\u0644\u0648\u0633 \u0646\u0648\u0634\u06CC\u062F\u0646\u06CC \u0633\u0631\u062F \u0648 \u06AF\u0631\u0645 \u06F2\u06F4\u0633\u0627\u0639\u062A\u0647 \u0648 \u0635\u0628\u062D\u0627\u0646\u0647 \u0628\u0647\u200C\u0635\u0648\u0631\u062A \u0645\u062C\u0627\u0646\u06CC \u0633\u0631\u0648 \u0645\u06CC\u200C\u0634\u0648\u062F"), /*#__PURE__*/React.createElement("div", {
        style: {
          paddingRight: '.9rem',
          paddingLeft: '.9rem'
        }
      }, /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          width: 6,
          height: 6,
          backgroundColor: 'black',
          borderRadius: 6,
          marginLeft: 6
        }
      }), "\u062F\u0633\u062A\u06CC\u0627\u0631 \u0635\u0648\u062A\u06CC \u062C\u0627\u0644\u0648\u0633 \u0628\u0647\u062A\u0631\u06CC\u0646 \u062A\u062C\u0631\u0628\u0647 \u0627\u0633\u06A9\u0627\u0646 \u0631\u0627 \u0628\u0631\u0627\u06CC\u062A\u0627\u0646 \u0641\u0631\u0627\u0647\u0645 \u0645\u06CC\u200C\u0622\u0648\u0631\u062F"), /*#__PURE__*/React.createElement("div", {
        style: {
          paddingRight: '.9rem',
          paddingLeft: '.9rem'
        }
      }, /*#__PURE__*/React.createElement("span", {
        style: {
          display: 'inline-block',
          width: 6,
          height: 6,
          backgroundColor: 'black',
          borderRadius: 6,
          marginLeft: 6
        }
      }), 'درتقویم تاریخ سفرتان را انتخاب کنید > در نقشه به جست و جو بپردازید > باانتخاب گزینه رزرو و پرداخت مبلغ کلید وای‌فای تان را دریافت کنید'), /*#__PURE__*/React.createElement("div", {
        className: "touchable",
        style: {
          padding: '13px 14px 15px 14px',
          color: 'white',
          backgroundColor: '#e31025',
          textAlign: 'center',
          fontWeight: 700,
          borderRadius: 12,
          fontSize: '1.02em',
          margin: 9
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          this.setState({
            landing: false
          });
        }
      }, 'بستن'))), " ", !this.state.show.isEmpty() && /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'fixed',
          left: 0,
          right: 0,
          top: 0,
          bottom: 0,
          zIndex: 799,
          padding: 14,
          backgroundColor: '#1111126A'
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          if (this.state.ordered) return;
          if (e.target === e.currentTarget) this.setState({
            show: {}
          }, () => {
            window.history.replaceState({}, null, `/properties#${map.getZoom()}/${map.getCenter().lat.toFixed(2)}/${map.getCenter().lng.toFixed(2)}`);
          });
        }
      }, /*#__PURE__*/React.createElement("div", {
        ref: elem => {
          window.show = elem;
        },
        className: "scroll",
        style: {
          height: '100%',
          backgroundColor: 'white',
          borderRadius: 16,
          direction: 'rtl',
          overflowY: 'scroll'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          paddingRight: '1em',
          direction: 'rtl'
        }
      }, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("span", {
        class: this.state.ordered ? "bold" : "bold touchable",
        style: {
          left: 'calc(0px)',
          top: '12px',
          position: 'relative',
          display: 'inline-block',
          transform: 'rotate(45deg)',
          fontSize: '1.05em',
          padding: 8,
          paddingBottom: 3,
          color: '#bb2d3b',
          opacity: this.state.ordered ? .6 : 1
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          if (this.state.ordered) return;
          this.setState({
            show: {}
          }, () => {
            window.history.replaceState({}, null, `/properties#${map.getZoom()}/${map.getCenter().lat.toFixed(2)}/${map.getCenter().lng.toFixed(2)}`);
          });
        }
      }, "+"), /*#__PURE__*/React.createElement("span", {
        class: "bold touchable",
        style: {
          left: 'calc(8px)',
          top: '10px',
          position: 'relative',
          display: 'inline-block',
          fontSize: '.95em',
          padding: 8,
          paddingBottom: 3,
          color: '#bb2d3b',
          float: 'left'
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          window.show.scrollTo(0, window.show.scrollHeight);
        }
      }, this.state.ordered ? 'لغو' : 'سفارش'))), /*#__PURE__*/React.createElement("div", {
        style: {
          marginTop: '1.05em',
          display: 'flex',
          flexDirection: 'row',
          overflowX: 'auto',
          direction: 'rtl'
        }
      }, this.state.show.images.map(im => /*#__PURE__*/React.createElement("div", {
        style: {
          flexShrink: 0,
          display: 'inline-block',
          backgroundImage: `url(${im})`,
          backgroundSize: 'cover',
          backgroundPosition: 'center',
          height: 200,
          width: '100%'
        }
      }))), /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: '1.5rem',
          fontWeight: 500,
          lineHeight: 1.5,
          paddingTop: '.8em',
          paddingBottom: '.9em',
          paddingRight: '.75em'
        }
      }, this.state.show.title), /*#__PURE__*/React.createElement("div", {
        style: {
          height: '2em',
          paddingLeft: '1.2em',
          paddingRight: '1.8em',
          paddingBottom: '.5em'
        }
      }, /*#__PURE__*/React.createElement("a", {
        style: {
          textDecoration: 'none',
          float: 'left',
          color: '#343747',
          fontWeight: 500,
          cursor: 'pointer'
        },
        onClick: () => {
          window.open(`tel:${this.state.show.phone}`, '_self');
        }
      }, ('0' + this.state.show.phone.slice(3)).farsify()), /*#__PURE__*/React.createElement("div", {
        style: {
          float: 'right'
        }
      }, "\u062A\u0645\u0627\u0633")), 'options' in this.state.show && /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          flexFlow: 'row wrap'
        }
      }, Object.keys(this.state.show.options).map(k => /*#__PURE__*/React.createElement("div", {
        className: "column",
        style: {
          flexGrow: 1,
          color: 'rgba(0,0,0,.87)',
          display: 'flex',
          flexDirection: 'column',
          flexBasis: '33.333%',
          padding: '16px 0',
          position: 'relative',
          textAlign: 'center'
        }
      }, /*#__PURE__*/React.createElement("span", {
        style: {
          color: 'rgba(0,0,0,.56)',
          marginBottom: '4px',
          fontSize: '.875rem'
        }
      }, k), /*#__PURE__*/React.createElement("span", {
        style: {
          fontSize: '1.125rem',
          fontWeight: 500,
          lineHeight: 1.5
        }
      }, this.state.show.options[k].farsify())))), " ", /*#__PURE__*/React.createElement("hr", {
        className: "divider"
      }), 'rows' in this.state.show && Object.keys(this.state.show.rows).map(k => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: '1rem',
          whiteSpace: 'nowrap',
          color: 'rgba(0,0,0,.56)',
          display: 'flex',
          justifyContent: 'space-between',
          lineHeight: 2,
          padding: '8px .7em'
        }
      }, /*#__PURE__*/React.createElement("div", {
        style: {
          minWidth: '20%',
          flex: '1 1',
          alignItems: 'flex-start',
          display: 'flex'
        }
      }, /*#__PURE__*/React.createElement("p", {
        style: {
          margin: 0,
          color: 'rgba(0,0,0,.56)',
          lineHeight: 2,
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        }
      }, k)), /*#__PURE__*/React.createElement("div", {
        style: {
          flex: '1 1',
          marginRight: '16px',
          minWidth: 'calc(50% - 16px)',
          alignItems: 'flex-end',
          display: 'flex',
          justifyContent: 'flex-end'
        }
      }, /*#__PURE__*/React.createElement("p", {
        style: {
          margin: 0,
          color: 'rgba(0,0,0,.87)',
          lineHeight: 2,
          overflow: 'hidden',
          textOverflow: 'ellipsis'
        }
      }, this.state.show.rows[k].farsify()))), /*#__PURE__*/React.createElement("hr", {
        className: "divider"
      }))), 'features' in this.state.show && /*#__PURE__*/React.createElement("div", {
        style: {
          display: 'flex',
          flexFlow: 'row wrap'
        }
      }, Object.keys(this.state.show.features).map(k => /*#__PURE__*/React.createElement("div", {
        className: "column",
        style: {
          flexGrow: 1,
          color: this.state.show.features[k] ? 'rgba(0,0,0,.87)' : 'rgba(0,0,0,.32)',
          display: 'flex',
          flexDirection: 'column',
          flexBasis: '33.333%',
          padding: '16px 0',
          position: 'relative',
          textAlign: 'center'
        }
      }, k in icons ? /*#__PURE__*/React.createElement("i", {
        className: icons[k],
        style: {
          marginBottom: '4px',
          width: '100%',
          fontSize: '1.5rem',
          height: '24px',
          textRendering: 'auto',
          backgroundPosition: '50%',
          backgroundSize: 'contain',
          display: 'inline-block',
          fontFamily: 'sonnat',
          lineHeight: 1,
          fontStyle: 'normal'
        }
      }) : /*#__PURE__*/React.createElement("span", {
        style: {
          color: 'rgba(0,0,0,.56)',
          marginBottom: '4px',
          fontSize: '.875rem'
        }
      }, k), /*#__PURE__*/React.createElement("span", {
        style: {
          fontSize: '1.125rem',
          fontWeight: this.state.show.features[k] ? 500 : 400,
          lineHeight: 1.5
        }
      }, k, !this.state.show.features[k] && ' ندارد')))), /*#__PURE__*/React.createElement("div", {
        classNmae: 'p'
      }, this.state.show.description), this.calendar(), this.state.ordered ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
        className: "touchable",
        style: {
          padding: '16px 14px 12px 14px',
          margin: '10px 10px',
          color: '#343747',
          backgroundColor: 'rgb(240, 233, 236)',
          textAlign: 'center',
          fontWeight: 700,
          borderRadius: 12,
          fontSize: '1.03em',
          direction: 'ltr'
        }
      }, String(this.state.show.cart).slice(0, 4), " . ", String(this.state.show.cart).slice(4, 8), " . ", String(this.state.show.cart).slice(8, 12), " . ", String(this.state.show.cart).slice(12, 16)), /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: '1.1rem',
          paddingRight: '.9rem',
          paddingLeft: '.9rem',
          textAlign: 'justify',
          textJustify: 'inter-word',
          lineHeight: 2,
          color: 'rgba(0,0,0,.87)',
          whiteSpace: 'pre-line'
        }
      }, "\u0645\u0628\u0644\u063A ", /*#__PURE__*/React.createElement("span", {
        style: {
          backgroundColor: '#e3e3e3',
          borderRadius: 10,
          padding: '2px 12px',
          color: '#e31025',
          fontWeight: 500
        }
      }, this.state.show.price.farsify()), " \u0647\u0632\u0627\u0631\u062A\u0648\u0645\u0627\u0646 \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062A \u062F\u0642\u06CC\u0642 \u0628\u0647 \u0634\u0645\u0627\u0631\u0647 \u062D\u0633\u0627\u0628 \u0628\u0627\u0644\u0627 \u0648\u0627\u0631\u06CC\u0632 \u06A9\u0646\u06CC\u062F. \u062F\u0642\u062A \u06A9\u0646\u06CC\u062F \u06A9\u0647 \u0631\u0642\u0645 \u06CC\u06A9\u0627\u0646 \u0648 \u062F\u0647\u06AF\u0627\u0646 \u0645\u0628\u0644\u063A \u0628\u0631\u0627\u06CC \u0631\u0647\u06AF\u06CC\u0631\u06CC \u062F\u0631 \u0641\u0631\u0627\u06CC\u0646\u062F \u0633\u0627\u06CC\u062A \u0627\u06CC\u062C\u0627\u062F \u0634\u062F\u0647 \u0627\u0633\u062A.  \u0627\u06CC\u0646 \u0645\u0627\u0632\u0627\u062F \u0628\u0631\u0627\u06CC \u06A9\u0645\u06A9 \u0628\u0647 \u0628\u06CC\u200C\u0633\u0631\u067E\u0631\u0633\u062A\u0627\u0646 \u0635\u0631\u0641 \u0645\u06CC\u200C\u06AF\u0631\u062F\u062F. \u0628\u0647\u200C\u0645\u062D\u0636 \u062F\u0631\u06CC\u0627\u0641\u062A \u067E\u06CC\u0627\u0645\u06A9 \u0648\u0627\u0631\u06CC\u0632\u060C \u0644\u06CC\u0646\u06A9 \u06A9\u0644\u06CC\u062F \u062F\u06CC\u062C\u06CC\u062A\u0627\u0644\u06CC \u0627\u0633\u06A9\u0627\u0646 \u0647\u0648\u0634\u0645\u0646\u062F \u0628\u0631\u0627\u06CC\u200C\u0634\u0645\u0627 \u0627\u0631\u0633\u0627\u0644 \u0645\u06CC\u200C\u06AF\u0631\u062F\u062F.")) : /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: '1.1rem',
          paddingRight: '.9rem',
          paddingLeft: '.9rem',
          textAlign: 'justify',
          textJustify: 'inter-word',
          lineHeight: 2,
          color: 'rgba(0,0,0,.87)',
          whiteSpace: 'pre-line'
        }
      }, " \u0627\u0632 \u0632\u0645\u0627\u0646\u200C\u0647\u0627\u06CC \u0645\u0648\u062C\u0648\u062F \u0628\u0627\u0632\u0647 \u0632\u0645\u0627\u0646\u06CC \u062E\u0648\u062F\u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"), /*#__PURE__*/React.createElement("div", {
        class: this.state.calendarRange[0] === -1 && !this.state.ordered ? "" : "touchable",
        style: {
          padding: '13px 14px 15px 14px',
          margin: '10px 10px',
          color: 'white',
          backgroundColor: '#e31025',
          textAlign: 'center',
          fontWeight: 700,
          borderRadius: 12,
          fontSize: '1.02em',
          opacity: this.state.calendarRange[0] === -1 && !this.state.ordered ? .6 : 1
        },
        onClick: async e => {
          if (this.state.calendarRange[0] === -1 && !this.state.ordered) return;
          this.setState({
            ordered: !this.state.ordered
          }, async () => {
            window.show.scrollTo(0, window.show.scrollHeight);
            if (this.state.ordered) {
              let r = await fetch(`/key/${this.state.show.id}/_/${this.state.calendar[this.state.calendarRange[0]].join('-')}/${this.state.calendar[this.state.calendarRange[1]].join('-')}`, {
                method: 'POST',
                headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json',
                  'Authorization': this.state.session
                }
              });
              if (r.status >= 300 || !(await r.json()).OK) ; //this.setState({ordered: !this.state.ordered});
            } else {
              let r = await fetch(`/key/${this.state.show.id}`, {
                method: 'DELETE',
                headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json',
                  'Authorization': this.state.session
                }
              });
              if (r.status < 300) {
                r = await r.json();
                if (r.OK) this.setState({
                  calendarRange: [-1, -1]
                });else this.setState({
                  ordered: !this.state.ordered
                });
              }
            }
          });
        }
      }, this.state.ordered ? 'لغو' : 'سفارش'))), " ", this.state.ordered && (!this.state.session || !this.state.phone) && /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'fixed',
          left: 0,
          right: 0,
          top: 0,
          bottom: 0,
          zIndex: 899,
          padding: '32% 12%',
          backgroundColor: '#1111126A'
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          if (e.target === e.currentTarget) this.setState({
            ordered: false
          });
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "scroll",
        style: {
          backgroundColor: 'white',
          borderRadius: 16,
          direction: 'rtl',
          overflowY: 'scroll',
          padding: 9
        }
      }, this.state.otp ? /*#__PURE__*/React.createElement("div", {
        classNmae: 'p',
        style: {
          margin: '-1px 3px 8px 3px'
        }
      }, "\u06A9\u062F \u062A\u0623\u06CC\u06CC\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F") : /*#__PURE__*/React.createElement("div", {
        classNmae: 'p',
        style: {
          margin: '-1px 3px 8px 3px'
        }
      }, "\u0628\u0631\u0627\u06CC \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0627\u0632 \u0627\u0645\u06A9\u0627\u0646\u0627\u062A \u062C\u0627\u0644\u0648\u0633\u060C \u0644\u0637\u0641\u0627\u064B \u0634\u0645\u0627\u0631\u0647\u0654 \u0645\u0648\u0628\u0627\u06CC\u0644 \u062E\u0648\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F. \u06A9\u062F \u062A\u0623\u06CC\u06CC\u062F \u0628\u0647 \u0627\u06CC\u0646 \u0634\u0645\u0627\u0631\u0647 \u067E\u06CC\u0627\u0645\u06A9 \u062E\u0648\u0627\u0647\u062F \u0634\u062F."), /*#__PURE__*/React.createElement("input", {
        placeHolder: "\u0645\u0648\u0628\u0627\u06CC\u0644",
        style: {
          display: 'block',
          width: '100%',
          borderRadius: 10,
          borderWidth: 1,
          marginBottom: 10,
          borderColor: '#e31025d4',
          lineHeight: '1.6em',
          fontSize: '1.3em',
          padding: '.4em',
          direction: 'ltr',
          color: '#343747'
        },
        onChange: e => {
          this.setState({
            phone: e.target.value
          });
        }
      }), this.state.otp ? /*#__PURE__*/React.createElement("input", {
        placeHolder: "\u06A9\u062F \u062A\u0623\u06CC\u06CC\u062F \u06F4 \u0631\u0642\u0645\u06CC",
        style: {
          display: 'block',
          width: '100%',
          borderRadius: 10,
          borderWidth: 1,
          borderColor: '#e31025d4',
          lineHeight: '1.6em',
          fontSize: '1.3em',
          padding: '.4em',
          direction: 'ltr',
          color: '#343747'
        },
        onChange: async e => {
          if (e.target.value.length == 4) {
            let r = await fetch(`/otp/${this.state.phone.trim().deFarsify()}/${e.target.value.trim().deFarsify()}`);
            if (r.status < 300) {
              r = await r.json();
              if (r.OK) {
                setCookie('session', r.session);
                setCookie('phone', this.state.phone);
                this.setState({
                  session: r.session
                }, async () => {
                  if (!this.state.show.isEmpty() && this.state.ordered && this.state.calendarRange[0] != -1) {
                    let r = await fetch(`/key/${this.state.show.id}/_/${this.state.calendar[this.state.calendarRange[0]].join('-')}/${this.state.calendar[this.state.calendarRange[1]].join('-')}`, {
                      method: 'POST',
                      headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': this.state.session
                      }
                    });
                    if (r.status >= 300 || !(await r.json()).OK) this.setState({
                      ordered: !this.state.ordered
                    });
                  }
                });
              }
            }
          }
        }
      }) : /*#__PURE__*/React.createElement("div", {
        className: "touchable",
        style: {
          padding: '13px 14px 15px 14px',
          color: 'white',
          backgroundColor: '#e31025',
          textAlign: 'center',
          fontWeight: 700,
          borderRadius: 12,
          fontSize: '1.02em'
        },
        onClick: async e => {
          let r = await fetch(`/otp/${this.state.phone.trim().deFarsify()}`);
          if (r.status < 300) {
            if (!this.state.phone) return;
            r = await r.json();
            this.setState({
              otp: true
            });
          }
        }
      }, 'ارسال پیامک'))), " ", this.state.calendared && /*#__PURE__*/React.createElement("div", {
        style: {
          position: 'fixed',
          left: 0,
          right: 0,
          top: 0,
          bottom: 0,
          zIndex: 898,
          padding: 14,
          paddingTop: '50%',
          backgroundColor: '#1111126A'
        },
        onClick: e => {
          e.preventDefault();
          e.stopPropagation();
          e.nativeEvent.stopImmediatePropagation();
          if (e.target === e.currentTarget) this.setState({
            calendared: false
          });
        }
      }, /*#__PURE__*/React.createElement("div", {
        className: "scroll",
        style: {
          backgroundColor: 'white',
          borderRadius: 16,
          direction: 'rtl',
          overflowY: 'scroll',
          padding: 0
        }
      }, this.calendar(), /*#__PURE__*/React.createElement("div", {
        style: {
          fontSize: '1.1rem',
          paddingRight: '.9rem',
          paddingLeft: '.9rem',
          textAlign: 'justify',
          textJustify: 'inter-word',
          lineHeight: 2,
          color: 'rgba(0,0,0,.87)',
          whiteSpace: 'pre-line'
        }
      }, "\u0628\u0627 \u0627\u0639\u0645\u0627\u0644 \u062A\u0642\u0648\u06CC\u0645 \u0627\u0633\u06A9\u0627\u0646\u200C\u0647\u0627\u06CC \u062E\u0627\u0644\u06CC \u062F\u0631 \u0628\u0627\u0632\u0647 \u0627\u0646\u062A\u062E\u0627\u0628 \u0634\u062F\u0647 \u0646\u0645\u0627\u06CC\u0627\u0646 \u0645\u06CC\u200C\u0634\u0648\u0646\u062F"), /*#__PURE__*/React.createElement("div", {
        className: "touchable",
        style: {
          padding: '13px 14px 15px 14px',
          color: 'white',
          backgroundColor: '#e31025',
          textAlign: 'center',
          fontWeight: 700,
          borderRadius: 12,
          fontSize: '1.02em',
          margin: 9
        },
        onClick: () => {
          this.setState({
            calendared: false
          });
        }
      }, 'اعمال'))));
    }
  }
  ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
  </script>
</body>
</html>